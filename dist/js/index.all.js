function pushArr(t,o){for(var e=0;e<o;e++)arr.push(t)}function randomDeg(){var t=arr[Math.floor(Math.random()*arr.length)];console.log("tp:"+t);var o=Math.floor(90*Math.random());return 1==t?0+o:2==t?90+o:3==t?180+o:4==t?(console.log(270,o),console.log(270+o),270+o):void 0}!function(t,o,e){function n(t){this.opts=e.extend(!0,{},r,t),this.doing=!1,this.init()}var r={rotateNum:5,body:"",disabledHandler:function(){},clickCallback:function(){},KinerLotteryHandler:function(t){}};n.prototype.setOpts=function(t){this.opts=e.extend(!0,{},r,t),this.init()},n.prototype.init=function(){var t=this;this.defNum=360*this.opts.rotateNum,e("body").on("tap",".KinerLotteryBtn",function(){if(e(this).hasClass("start")&&!t.doing)console.log("点击"),t.opts.clickCallback.call(t);else{var o=e(this).hasClass("no-start")?"noStart":e(this).hasClass("completed")?"completed":"illegal";t.opts.disabledHandler(o)}}),e(this.opts.body).find(".KinerLotteryContent").get(0).addEventListener("webkitTransitionEnd",function(){t.doing=!1;var o=e(t.opts.body).attr("data-deg");0==t.opts.direction?(e(t.opts.body).attr("data-deg",360-o),e(t.opts.body).find(".KinerLotteryContent").css({"-webkit-transition":"none",transition:"none","-webkit-transform":"rotate("+o+"deg)",transform:"rotate("+o+"deg)"}),t.opts.KinerLotteryHandler(360-o)):(e(t.opts.body).attr("data-deg",o),e(t.opts.body).find(".KinerLotteryContent").css({"-webkit-transition":"none",transition:"none","-webkit-transform":"rotate("+-o+"deg)",transform:"rotate("+-o+"deg)"}),t.opts.KinerLotteryHandler(o))})},n.prototype.goKinerLottery=function(t){if(!this.doing){var o=t+this.defNum,n=0==this.opts.direction?o:-o;this.doing=!0,e(this.opts.body).find(".KinerLotteryBtn").addClass("doing"),e(this.opts.body).find(".KinerLotteryContent").css({"-webkit-transition":"all 5s",transition:"all 5s","-webkit-transform":"rotate("+n+"deg)",transform:"rotate("+n+"deg)"}),e(this.opts.body).attr("data-deg",t)}},t.KinerLottery=n}(window,document,$);var arr=[];pushArr(1,2),pushArr(2,200),pushArr(3,300),pushArr(4,498);var whichAward=function(t){return console.log(t),t>=0&&t<90?($(".mask").show(),console.log("4等奖"),"four"):t>=90&&t<180?($(".mask").show(),console.log("2等奖"),"tow"):t>=180&&t<270?($(".mask").show(),console.log("3等奖"),"three"):(console.log("一等奖"),$.get("./fs/mwrite.php?extend=x",function(t){console.log(t)}),$(".mask").show(),$(".submit").show(),"one")},KinerLottery=new KinerLottery({rotateNum:8,body:"#box",direction:0,disabledHandler:function(t){switch(t){case"noStart":alert("活动尚未开始");break;case"completed":alert("您已经参与过活动了")}},clickCallback:function(){var t=this;$.get("./fs/mread.php",function(o){o.length>=100&&(arr.shift(),arr.shift()),t.goKinerLottery(randomDeg())})},KinerLotteryHandler:function(t){whichAward(t),localStorage.setItem("flang","ok"),document.querySelector(".KinerLotteryBtn").classList.add("completed"),document.querySelector(".KinerLotteryBtn").classList.remove("start")}});localStorage.getItem("flang")&&(document.querySelector(".KinerLotteryBtn").classList.add("completed"),document.querySelector(".KinerLotteryBtn").classList.remove("start")),$(".submit").on("submit",function(t){t.preventDefault(),$.ajax({url:"./fs/fwrite.php",type:"get",data:$(this).serialize(),success:function(t){$(".submit").html("<h1>提交成功</h1>"),setTimeout(function(){$(".mask").hide()},3e3)}})}),$(".mask").on("tap",function(){$(this).hide()}),$(".mask-close").on("tap",function(){$(".mask").hide()}),$(".mask-img").on("tap",function(t){t.stopPropagation()});